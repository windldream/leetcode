/**
 * @param {number[][]} graph
 * @param {number[]} initial
 * @return {number}
 */
var minMalwareSpread = function(graph, initial) {
  const m = graph.length;
  const n = graph[0].length;
  const g = Array(Math.max(m, n))
    .fill(0)
    .map(() => new Set());
  for (let i = 0; i < m; i++) {
    for (let j = 0; j < n; j++) {
      if (i === j) continue;
      if (graph[i][j] === 1) {
        g[i].add(j);
        g[j].add(i);
      }
    }
  }

  let max = 0;
  let minIndex = -1;
  initial.sort((a, b) => a - b);
  for (let i = 0; i < initial.length; i++) {
    const visited = [];
    dfs(g, initial[i], visited);
    if (visited.length > max) {
      max = visited.length;
      minIndex = initial[i];
    }
  }
  return minIndex;

  function dfs(graph, index, visited) {
    if (index >= graph.length || visited.includes(index)) return;
    visited.push(index);
    for (const next of graph[index]) {
      dfs(graph, next, visited);
    }
  }
};
